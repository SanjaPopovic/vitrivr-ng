<div id="map" class="mapStyle"></div>

<li *ngFor="let date of dates;">
    <div>{{date | date}}</div>
</li>

<div style="padding:10px;">
    <p *ngIf="!(dataSource | async) && !loading" class="background-prompt">No results available. Please start a
        search...</p>

    <p *ngIf="!(dataSource | async) && loading" class="background-prompt">
        <mat-spinner></mat-spinner>
    </p>

    <div (scrolled)="incrementCount()" [fromRoot]="true" [infiniteScrollContainer]="'#scrollable'"
         [alwaysCallback]="true"
         [infiniteScrollDistance]="1" [infiniteScrollUpDistance]="2" class="list"
         infiniteScroll>
        <!--(dataSource|async): dataSource returns observable or promise, with async we subscribe. Replace OrderByScorePipe-->
        <ng-container *ngIf="(((dataSource | async) | FilterPipe : (objectFilter | async)) | OrderByDatePipe) as pipeRes">
            <!--            <li *ngFor="let date of pipeRes[0];"><div> test {{date.path}}</div></li>-->
            <div *ngIf="pipeRes.length > 0">
                <ngx-slider [(value)]="value" [options]="options" (valueChange)="currentDate($event)"></ngx-slider>
            </div>
            <ng-container *ngIf="test(chosenDate, pipeRes)">
                <div *ngFor="let mediaobject of getMediaObj(chosenDate, pipeRes)"
                     class="object">
                    <app-result-segment-preview-tile
                            *ngFor="let segment of (mediaobject.segments | FilterPipe : (segmentFilter|async) | OrderBySegmentPipe); trackBy: segmentTracking"
                            [container]="this"
                            [score]="segment.score" [segment]="segment"></app-result-segment-preview-tile>
                </div>
            </ng-container>
        </ng-container>
    </div>
</div>
